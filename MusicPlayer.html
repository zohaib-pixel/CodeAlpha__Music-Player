<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Minimal Music Player</title>
  <style>
    :root{
      --bg:#0f1724; /* dark navy */
      --card:#0b1220;
      --accent:#7c3aed; /* purple */
      --muted:#94a3b8;
      --glass: rgba(255,255,255,0.04);
    }
    *{box-sizing:border-box}
    body{
      margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,#071029 0%, #081426 100%);font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,'Helvetica Neue',Arial;
      color:#e6eef8;padding:32px;
    }
    .player{
      width:100%;max-width:860px;background:linear-gradient(180deg,var(--card),#071025);border-radius:14px;padding:20px;box-shadow:0 10px 30px rgba(2,6,23,0.7);display:grid;grid-template-columns:1fr 320px;gap:18px;align-items:start;
    }

    /* left: controls and info */
    .meta{display:flex;flex-direction:column;gap:16px}
    .cover{
      width:100%;height:220px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#0ea5a6);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:22px;color:rgba(255,255,255,0.95);overflow:hidden;position:relative
    }
    .cover img{width:100%;height:100%;object-fit:cover}
    .info{display:flex;justify-content:space-between;align-items:center}
    .title-artist{display:flex;flex-direction:column}
    .title{font-size:18px;font-weight:600}
    .artist{font-size:13px;color:var(--muted);margin-top:4px}

    .controls{display:flex;flex-direction:column;gap:12px}
    .buttons{display:flex;gap:12px;align-items:center}
    .btn{background:var(--glass);border:none;padding:10px;border-radius:10px;cursor:pointer;display:inline-grid;place-items:center;width:44px;height:44px;transition:transform .12s ease, background .12s}
    .btn:hover{transform:translateY(-4px);background:rgba(255,255,255,0.05)}
    .btn.play{width:64px;height:64px;border-radius:14px;background:linear-gradient(90deg,var(--accent),#06b6d4);box-shadow:0 6px 18px rgba(124,58,237,0.28)}

    .progress-wrap{display:flex;align-items:center;gap:12px}
    .time{font-size:12px;color:var(--muted);min-width:48px;text-align:center}
    .progress{flex:1;height:10px;background:rgba(255,255,255,0.05);border-radius:999px;position:relative;cursor:pointer}
    .progress > .bar{height:100%;width:0%;border-radius:999px;background:linear-gradient(90deg,var(--accent),#06b6d4);transition:width .08s linear}

    .right{padding:12px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);border-radius:10px;height:100%;display:flex;flex-direction:column}
    .playlist{overflow:auto;padding-right:8px}
    .track{display:flex;gap:12px;align-items:center;padding:8px;border-radius:8px;cursor:pointer}
    .track:hover{background:rgba(255,255,255,0.02)}
    .track.active{background:linear-gradient(90deg, rgba(124,58,237,0.12), rgba(6,182,212,0.06))}
    .track .metaSmall{display:flex;flex-direction:column}
    .track .tTitle{font-weight:600}
    .track .tArtist{font-size:12px;color:var(--muted)}

    .volume-row{display:flex;align-items:center;gap:8px;margin-top:auto}
    .volume{flex:1;display:flex;align-items:center;gap:8px}
    input[type=range]{-webkit-appearance:none;background:transparent;width:100%}
    input[type=range]::-webkit-slider-runnable-track{height:8px;border-radius:8px;background:rgba(255,255,255,0.06)}
    input[type=range]::-webkit-slider-thumb{ -webkit-appearance:none;width:16px;height:16px;border-radius:50%;background:white;margin-top:-4px;box-shadow:0 3px 8px rgba(2,6,23,0.6)}

    .row{display:flex;gap:8px;align-items:center}
    .small{font-size:13px;color:var(--muted)}

    /* responsive */
    @media (max-width:820px){
      .player{grid-template-columns:1fr;}
      .cover{height:260px}
    }
  </style>
</head>
<body>
  <div class="player" role="application" aria-label="Music player">
    <div class="meta">
      <div class="cover" id="cover">
        <img id="coverImg" src="" alt="cover art"/>
        <div id="coverFallback" style="position:absolute;inset:0;display:flex;align-items:center;justify-content:center;pointer-events:none">Music</div>
      </div>

      <div class="info">
        <div class="title-artist">
          <div class="title" id="songTitle">Title</div>
          <div class="artist" id="songArtist">Artist</div>
        </div>
        <div class="small">Autoplay <input id="autoplayToggle" type="checkbox" title="Toggle autoplay" /></div>
      </div>

      <div class="controls">
        <div class="buttons">
          <button class="btn" id="prevBtn" title="Previous">‚èÆ</button>
          <button class="btn play" id="playPauseBtn" title="Play/Pause">‚ñ∂</button>
          <button class="btn" id="nextBtn" title="Next">‚è≠</button>
          <button class="btn" id="shuffleBtn" title="Shuffle">üîÄ</button>
        </div>

        <div class="progress-wrap">
          <div class="time" id="currentTime">0:00</div>
          <div class="progress" id="progressBar" aria-label="progress bar">
            <div class="bar" id="progress"></div>
          </div>
          <div class="time" id="duration">0:00</div>
        </div>

        <div class="row">
          <div class="small">Volume</div>
          <input id="volume" type="range" min="0" max="1" step="0.01" value="0.8" />
        </div>
      </div>
    </div>

    <aside class="right">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
        <strong>Playlist</strong>
        <div class="small">Tap track to play</div>
      </div>
      <div class="playlist" id="playlist"></div>

      <div style="margin-top:12px;display:flex;justify-content:space-between;align-items:center">
        <div class="small">Now playing: <span id="nowPlayingSmall">‚Äî</span></div>
        <div class="small">Size: <span id="playlistCount">0</span></div>
      </div>

      <div class="volume-row">
        <div class="small">Speed</div>
        <div class="volume">
          <input id="speed" type="range" min="0.5" max="2" step="0.1" value="1" />
          <div class="small" id="speedVal">1√ó</div>
        </div>
      </div>
    </aside>
  </div>

  <!-- single audio element controlled by JS -->
  <audio id="audio" preload="metadata"></audio>

  <script>
    // --- Example playlist ---
    const tracks = [
      {
        title: 'Sunny Morning',
        artist: 'Chillhop Cafe',
        src: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3',
        cover: ''
      },
      {
        title: 'Gentle Waves',
        artist: 'Relaxation Station',
        src: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3',
        cover: ''
      },
      {
        title: 'Upbeat Drive',
        artist: 'Roadtrip Beats',
        src: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3',
        cover: ''
      }
    ];

    // UI refs
    const audio = document.getElementById('audio');
    const playPauseBtn = document.getElementById('playPauseBtn');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const progress = document.getElementById('progress');
    const progressBar = document.getElementById('progressBar');
    const currentTimeEl = document.getElementById('currentTime');
    const durationEl = document.getElementById('duration');
    const songTitle = document.getElementById('songTitle');
    const songArtist = document.getElementById('songArtist');
    const playlistEl = document.getElementById('playlist');
    const nowPlayingSmall = document.getElementById('nowPlayingSmall');
    const playlistCount = document.getElementById('playlistCount');
    const volume = document.getElementById('volume');
    const coverImg = document.getElementById('coverImg');
    const coverFallback = document.getElementById('coverFallback');
    const autoplayToggle = document.getElementById('autoplayToggle');
    const shuffleBtn = document.getElementById('shuffleBtn');
    const speed = document.getElementById('speed');
    const speedVal = document.getElementById('speedVal');

    let currentIndex = 0;
    let isPlaying = false;
    let isShuffle = false;

    // populate playlist UI
    function renderPlaylist(){
      playlistEl.innerHTML = '';
      tracks.forEach((t, i)=>{
        const div = document.createElement('div');
        div.className = 'track';
        div.dataset.index = i;
        div.innerHTML = `
          <div style=\"width:46px;height:46px;border-radius:8px;background:linear-gradient(135deg,var(--accent),#06b6d4);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600;\">${i+1}</div>
          <div class=\"metaSmall\"><div class=\"tTitle\">${escapeHtml(t.title)}</div><div class=\"tArtist\">${escapeHtml(t.artist)}</div></div>
        `;
        div.addEventListener('click', ()=>{loadTrack(i);playTrack()});
        playlistEl.appendChild(div);
      });
      playlistCount.textContent = tracks.length;
      highlightActive();
    }

    function escapeHtml(s){return (s||'').replace(/[&<>\"]/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','\"':'&quot;'}[c]));}

    function loadTrack(index){
      if(index<0) index = tracks.length-1;
      if(index>=tracks.length) index = 0;
      currentIndex = index;
      const t = tracks[currentIndex];
      audio.src = t.src;
      songTitle.textContent = t.title;
      songArtist.textContent = t.artist;
      nowPlayingSmall.textContent = `${t.title} ‚Äî ${t.artist}`;
      if(t.cover){coverImg.src = t.cover;coverFallback.style.display='none';} else {coverImg.src='';coverFallback.style.display='flex'}
      highlightActive();
    }

    function highlightActive(){
      document.querySelectorAll('.track').forEach(el => el.classList.remove('active'));
      const el = document.querySelector(`.track[data-index=\"${currentIndex}\"]`);
      if(el) el.classList.add('active');
    }

    function playTrack(){
      audio.play().then(()=>{
        isPlaying = true;playPauseBtn.textContent = '‚è∏';
      }).catch(e=>{
        // Autoplay restrictions may block play(): just set UI state
        isPlaying = true; playPauseBtn.textContent='‚è∏';
      });
    }
    function pauseTrack(){audio.pause();isPlaying=false;playPauseBtn.textContent='‚ñ∂'}

    playPauseBtn.addEventListener('click', ()=>{
      if(!audio.src) loadTrack(currentIndex);
      if(audio.paused) playTrack(); else pauseTrack();
    });

    prevBtn.addEventListener('click', ()=>{currentIndex--; if(currentIndex<0) currentIndex = tracks.length-1; loadTrack(currentIndex); playTrack();});
    nextBtn.addEventListener('click', ()=>{nextTrack();});

    shuffleBtn.addEventListener('click', ()=>{isShuffle = !isShuffle; shuffleBtn.style.opacity = isShuffle?1:0.6;});

    function nextTrack(){
      if(isShuffle){
        currentIndex = Math.floor(Math.random()*tracks.length);
      } else {
        currentIndex++;
        if(currentIndex>=tracks.length) currentIndex = 0;
      }
      loadTrack(currentIndex);
      playTrack();
    }

    // audio events
    audio.addEventListener('loadedmetadata', ()=>{
      durationEl.textContent = formatTime(audio.duration);
      // if autoplay checkbox is set and checked -> play
      if(autoplayToggle.checked) playTrack();
    });

    audio.addEventListener('timeupdate', ()=>{
      currentTimeEl.textContent = formatTime(audio.currentTime);
      const pct = (audio.currentTime / (audio.duration||1))*100;
      progress.style.width = pct + '%';
    });

    audio.addEventListener('ended', ()=>{
      if(autoplayToggle.checked){ nextTrack(); } else { pauseTrack(); }
    });

    function formatTime(sec){
      if(!sec || isNaN(sec)) return '0:00';
      const s = Math.floor(sec % 60).toString().padStart(2,'0');
      const m = Math.floor(sec/60);
      return `${m}:${s}`;
    }

    // progress seeking
    function seek(e){
      const rect = progressBar.getBoundingClientRect();
      const x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
      const pct = Math.max(0, Math.min(1, x / rect.width));
      audio.currentTime = pct * (audio.duration || 0);
    }
    progressBar.addEventListener('click', seek);

    // volume
    volume.addEventListener('input', ()=>{audio.volume = parseFloat(volume.value)});
    volume.dispatchEvent(new Event('input'));

    // speed
    speed.addEventListener('input', ()=>{audio.playbackRate = parseFloat(speed.value); speedVal.textContent = speed.value + '√ó'});
    speed.dispatchEvent(new Event('input'));

    // keyboard shortcuts: space play/pause, left/right seek
    window.addEventListener('keydown', (e)=>{
      if(e.code === 'Space'){ e.preventDefault(); if(audio.paused) playTrack(); else pauseTrack(); }
      if(e.code === 'ArrowRight'){ audio.currentTime = Math.min(audio.duration || 0, audio.currentTime + 10); }
      if(e.code === 'ArrowLeft'){ audio.currentTime = Math.max(0, audio.currentTime - 10); }
    });

    // init
    renderPlaylist();
    loadTrack(0);

    // accessibility & mobile enhancements
    // make progress bar draggable
    let isDragging = false;
    progressBar.addEventListener('pointerdown', e=>{ isDragging=true; progressBar.setPointerCapture(e.pointerId); seek(e); });
    progressBar.addEventListener('pointermove', e=>{ if(isDragging) seek(e); });
    progressBar.addEventListener('pointerup', e=>{ isDragging=false; });

    // helper to allow adding tracks programmatically (example)
    function addTrack(trackObj){ tracks.push(trackObj); renderPlaylist(); }

    // expose a tiny API for console tinkering
    window.player = {play:playTrack,pause:pauseTrack,next:nextTrack,prev:()=>{prevBtn.click()},load:loadTrack,add:addTrack,tracks}

  </script>
</body>
</html>
